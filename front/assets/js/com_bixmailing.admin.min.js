/*! com_bixmailing 01-02-2015 19:03:22 */
(function(t){"use strict";var e;jQuery&&UIkit&&(e=t(jQuery,UIkit)),"function"==typeof define&&define.amd&&define("uikit-bixloadtemplate",["uikit"],function(){return e||t(jQuery,UIkit)})})(function(t,e){"use strict";return e.component("bixloadtemplate",{defaults:{view:"",layout:"",tpl:"",highlight:!1,ajaxUrl:"/index.php?option=com_bixmailing&format=raw"},boot:function(){e.ready(function(i){t("[data-bix-loadtemplate]",i).each(function(){var i=t(this);i.data("bixloadtemplate")||e.bixloadtemplate(i,e.Utils.options(i.attr("data-bix-loadtemplate")))})})},init:function(){var t=this;this.on("loadTemplate",function(){t.element.load(t.options.ajaxUrl,t.options,function(){t.options.highlight&&t.find("li:first-child").addClass("uk-animation-scale-down"),t.element.trigger("templateLoaded")})})}}),e.bixloadtemplate}),jQuery(function(t){"use strict";(function(){var e=t("#batch-task");t("[data-uk-switcher][data-batch-type]").on("uk.switcher.show",function(t,i){e.val(i.data("batch-type"))})})(),function(){function e(){t("[bix-nr-selected]").html(t('[name="cid[]"]:checked').length)}t('[name="cid[]"], [name=checkall-toggle]').click(e),e()}()}),jQuery(function(t){"use strict";function e(e){function i(){var i=n();i.task=e.data("form-mailingnaam"),t.post(a,i,"","json").done(function(i){i.success&&(t.UIkit.notify.closeAll(),e.find('[name="jform[naam]"]').val(i.result.naam))}).fail(function(){UIkit.notify({message:"Fout in request",status:"danger"})}).always(function(t){t.messages&&UIkit.bixTools.showNotifications(t.messages)})}function n(){return{user_id:e.find("[name*=user_id]").val(),type:e.find("[name*=type]").val()}}var a="/index.php?option=com_bixmailing&format=raw&task=mailing.renderMailingNaam";t("[name*=user_id], [name*=type]").each(function(){t(this).change(function(){i()})}),e.find('[name="jform[naam]"]').after(t('<button class="uk-button uk-button-small" type="button"><i class="uk-icon-refresh"></i></button>').click(i))}(function(){t("[data-form-mailingnaam]").each(function(){e(t(this))})})()}),jQuery(function(t){"use strict";(function(){function e(t,e){d.removeClass("uk-hidden"),l.val(t),u.val(e),u.data("markdownarea").editor.setValue(e)}function i(){n="",a="",t("[name^=batch]").val(""),t("[data-template-type]").addClass("uk-hidden"),d.addClass("uk-hidden"),u.data("markdownarea").editor.setValue(""),t("#mailhistorie").trigger("loadTemplate")}var n,a,s="/index.php?option=com_bixmailing&format=raw",o=t("#batch-task"),r=t("[name=task]"),l=t("[name*=subject]"),u=t("[name*=template]"),d=t("#template-editor");t("[name*=event]").change(function(){t("[data-template-type]").addClass("uk-hidden"),t('[data-template-type="'+t(this).val()+'"]').removeClass("uk-hidden")}),t("[data-template-type]").each(function(){var i=t(this),s=i.find("div.content").html();i.find("button").click(function(){var i=t(this).html();a=i,n=s,e(i,s)})}),t("#load-template").click(function(){(n||a)&&e(a,n)}),t("#bix-cancelmail").click(i),t("#bix-sendmail").attr("onclick","").click(function(e){e.preventDefault(),o.val("mail"),r.val("mailing.batch");var n=t(".uk-form").serialize();t.post(s,n,"","json").done(function(e){e.success&&(t('[name="cid[]"], [name=checkall-toggle]').attr("checked",!1),i())}).fail(function(){t.UIkit.notify("Fout in request","danger")}).always(function(e){e.messages&&t.each(e.messages,function(e){t.each(this,function(){t.UIkit.notify(this,e)})})})})})()});
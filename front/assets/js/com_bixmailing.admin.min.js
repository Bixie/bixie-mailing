/*! com_bixmailing 23-11-2016 11:26:18 */
!function(a){"use strict";var b;jQuery&&UIkit&&(b=a(jQuery,UIkit)),"function"==typeof define&&define.amd&&define("uikit-bixloadtemplate",["uikit"],function(){return b||a(jQuery,UIkit)})}(function(a,b){"use strict";return b.component("bixloadtemplate",{defaults:{view:"",layout:"",tpl:"",highlight:!1,ajaxUrl:"/index.php?option=com_bixmailing&format=raw"},boot:function(){b.ready(function(c){a("[data-bix-loadtemplate]",c).each(function(){var c=a(this);c.data("bixloadtemplate")||b.bixloadtemplate(c,b.Utils.options(c.attr("data-bix-loadtemplate")))})})},init:function(){var a=this;this.on("loadTemplate",function(){a.element.load(a.options.ajaxUrl,a.options,function(){a.options.highlight&&a.find("li:first-child").addClass("uk-animation-scale-down"),a.element.trigger("templateLoaded")})})}}),b.bixloadtemplate}),jQuery(function(a){"use strict";!function(){var b=a("#batch-task");a("[data-uk-switcher][data-batch-type]").on("uk.switcher.show",function(a,c){b.val(c.data("batch-type"))})}(),function(){function b(){a("[bix-nr-selected]").html(a('[name="cid[]"]:checked').length)}a('[name="cid[]"], [name=checkall-toggle]').click(b),b()}()}),jQuery(function(a){"use strict";function b(b){function c(){var c=d();c.task=b.data("form-mailingnaam"),a.post(e,c,"","json").done(function(c){c.success&&(a.UIkit.notify.closeAll(),b.find('[name="jform[naam]"]').val(c.result.naam))}).fail(function(){UIkit.notify({message:"Fout in request",status:"danger"})}).always(function(a){a.messages&&UIkit.bixTools.showNotifications(a.messages)})}function d(){return{user_id:b.find("[name*=user_id]").val(),type:b.find("[name*=type]").val()}}var e="/index.php?option=com_bixmailing&format=raw&task=mailing.renderMailingNaam";a("[name*=user_id], [name*=type]").each(function(){a(this).change(function(){c()})}),b.find('[name="jform[naam]"]').after(a('<button class="uk-button uk-button-small" type="button"><i class="uk-icon-refresh"></i></button>').click(c))}!function(){a("[data-form-mailingnaam]").each(function(){b(a(this))})}()}),jQuery(function(a){"use strict";!function(){function b(a,b){k.removeClass("uk-hidden"),i.val(a),j.val(b),j.data("markdownarea").editor.setValue(b)}function c(){d="",e="",a("[name^=batch]").val(""),a("[data-template-type]").addClass("uk-hidden"),k.addClass("uk-hidden"),j.data("markdownarea").editor.setValue(""),a("#mailhistorie").trigger("loadTemplate")}var d,e,f="index.php?option=com_bixmailing&format=raw",g=a("#batch-task"),h=a("[name=task]"),i=a("[name*=subject]"),j=a("[name*=template]"),k=a("#template-editor");a("[name*=event]").change(function(){a("[data-template-type]").addClass("uk-hidden"),a('[data-template-type="'+a(this).val()+'"]').removeClass("uk-hidden")}),a("[data-template-type]").each(function(){var c=a(this),f=c.find("div.content").html();c.find("button").click(function(){var c=a(this).html();e=c,d=f,b(c,f)})}),a("#load-template").click(function(){(d||e)&&b(e,d)}),a("#bix-cancelmail").click(c),a("#bix-sendmail").attr("onclick","").click(function(b){b.preventDefault(),g.val("mail"),h.val("mailing.batch");var d=a(".uk-form").serialize();a.post(f,d,"","json").done(function(b){b.success&&(a('[name="cid[]"], [name=checkall-toggle]').attr("checked",!1),c())}).fail(function(){a.UIkit.notify("Fout in request","danger")}).always(function(b){b.messages&&a.each(b.messages,function(b){a.each(this,function(){a.UIkit.notify(this,b)})})})})}()});
/*! com_bixmailing 23-11-2016 11:26:18 */
!function(a){"use strict";var b;jQuery&&UIkit&&(b=a(jQuery,UIkit)),"function"==typeof define&&define.amd&&define("uikit-bixuserform",["uikit"],function(){return b||a(jQuery,UIkit)})}(function(a,b){"use strict";function c(c){var e=this;this.ajaxReq=!1,this.spinFields=c.find("[name*=address1], [name*=city]"),this.spinFields.each(function(){var b=a(this);b.wrap(a("<div></div>").css("position","relative").width(b.outerWidth())),b.after(a('<i class="uk-icon-spinner uk-icon-spin"></i>').css({position:"absolute",right:"10px",top:"10px"}).hide())}),c.find("[name*=postal_code], [name*=address2]").keyup(function(){var a,b,d={},f="",g=c.find("[name*=postal_code]").val().replace(/\s+/,"").toUpperCase(),h=c.find("[name*=address2]").val();6!==g.length&&(g=!1),h.match(/\-/)&&(a=h.split("-"),h=a[0],f=a[1]),b=h.toInt(),g&&b&&(d.pcode=g,d.huisnr=b,d.toev=f,e.lookup(d))}),this.lookup=function(e){var f=this;this.ajaxReq!==!1?this.ajaxReq.abort():this.spin(),b.notify.closeAll(),this.ajaxReq=a.ajax({type:"POST",dataType:"json",url:d,data:e}).done(function(a){a.success&&a.result.street&&(c.find("[name*=address1]").val(a.result.street),c.find("[name*=city]").val(a.result.city),c.find("[name*=postal_code]").val(a.result.postcode)),f.stopSpin()}).always(function(a){f.ajaxReq=!1,a.messages&&b.bixTools.showNotifications(a.messages)})},this.spin=function(){this.spinFields.each(function(){a(this).next().show()})},this.stopSpin=function(){this.spinFields.each(function(){a(this).next().hide()})}}var d="/index.php?option=com_bixmailing&format=raw&task=bixmailing.postcodecheck",e="bix-userform",f="/index.php?option=com_bixmailing&view=klant&layout=confirm&format=raw";return b.component("bixuserform",{defaults:{},boot:function(){b.ready(function(c){a("[data-bix-userform]",c).each(function(){var c=a(this);c.data("bixuserform")||b.bixuserform(c,b.Utils.options(c.attr("data-bix-userform")))}),a("[data-bix-ajax-submit]",c).each(function(){var c=a(this),d=b.bixajaxsubmit(c,b.Utils.options(c.attr("data-bix-ajax-submit")));!c.attr("data-checkset")&&d&&c.attr("id")===e&&(d.validateForm=function(){return document.formvalidator.isValid(c.get(0))},d.onSuccess=function(a){a.confirm&&c.load(f+"&id="+a.id),b.bixTools.scrollToEl(c,{offset:100})},c.attr("data-checkset",!0))})})},init:function(){var b=this,d=this.find('[name="jform[name]"]').prop("readonly",!0).addClass("readonly"),e=this.find('[name="jform[profile][voornaam]"]').change(function(){b.setNaam(d,e,f)}),f=this.find('[name="jform[profile][achternaam]"]').change(function(){b.setNaam(d,e,f)});this.fieldsets=this.find("fieldset"),this.element.prepend(this.fieldsets.get(1)),this.find("[name*=postal_code]").closest("fieldset").each(function(){new c(a(this))})},setNaam:function(a,b,c){var d=b.val()?b.val()+" ":"";a.val(d+c.val())}}),b.bixuserform});